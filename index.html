<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bouncing Ball â€” Matter.js</title>
    <style>
      :root {
        --bg: #0f172a;
        --panel: #111827;
        --text: #e5e7eb;
        --muted: #94a3b8;
        --accent: #38bdf8;
      }
      * { box-sizing: border-box; }
      html, body, #app { height: 100%; margin: 0; }
      body { background: var(--bg); color: var(--text); font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji"; }
      #app { display: grid; grid-template-rows: auto 1fr auto; }
      .bar { display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: 0.75rem 1rem; background: var(--panel); border-bottom: 1px solid rgba(255,255,255,0.08); }
      .bar.small { font-size: 0.875rem; color: var(--muted); border-top: 1px solid rgba(255,255,255,0.08); }
      h1 { font-size: 1.125rem; margin: 0; letter-spacing: 0.2px; }
      .controls { display: flex; align-items: center; gap: 0.75rem; }
      button { background: var(--accent); color: #081018; border: 0; padding: 0.5rem 0.75rem; border-radius: 0.75rem; font-weight: 600; cursor: pointer; }
      button:active { transform: translateY(1px); }
      label.gravity { display: inline-flex; align-items: center; gap: 0.5rem; font-size: 0.9rem; color: var(--text); }
      #canvas-holder { position: relative; height: 100%; width: 100%; }
      #canvas-holder canvas { display: block; width: 100% !important; height: 100% !important; }
    </style>
  </head>
  <body>
    <div id="app">
      <header class="bar">
        <h1>Bouncing Ball</h1>
        <div class="controls">
          <button id="reset">Reset</button>
          <label class="gravity">
            Gravity
            <input id="gravity" type="range" min="0" max="2" step="0.05" value="1" />
          </label>
        </div>
      </header>
      <div id="canvas-holder"></div>
      <footer class="bar small">Drag the ball with your mouse / touch. Resize the window to see it adapt.</footer>
    </div>

    <!-- Matter.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/matter-js@0.19.0/build/matter.min.js"></script>

    <script>
      const { Engine, Render, Runner, Bodies, Composite, Mouse, MouseConstraint, World, Events } = Matter;

      function getSize() {
        const holder = document.getElementById('canvas-holder');
        return { width: holder.clientWidth, height: holder.clientHeight };
      }

      const engine = Engine.create();
      const world = engine.world;

      const holder = document.getElementById('canvas-holder');
      const { width, height } = getSize();
      const render = Render.create({
        element: holder,
        engine,
        options: { width, height, wireframes: false, background: '#0b1021' }
      });

      Render.run(render);
      const runner = Runner.create();
      Runner.run(runner, engine);

      const thickness = 200;
      let walls = [
        Bodies.rectangle(width / 2, height + thickness / 2, width, thickness, { isStatic: true }),
        Bodies.rectangle(width / 2, -thickness / 2, width, thickness, { isStatic: true }),
        Bodies.rectangle(-thickness / 2, height / 2, thickness, height, { isStatic: true }),
        Bodies.rectangle(width + thickness / 2, height / 2, thickness, height, { isStatic: true })
      ];
      Composite.add(world, walls);

      let ball = Bodies.circle(width * 0.5, height * 0.2, Math.min(width, height) * 0.05, {
        restitution: 0.9,
        friction: 0.02,
        frictionAir: 0.002,
        render: { fillStyle: '#38bdf8', strokeStyle: '#e2e8f0', lineWidth: 2 }
      });
      World.add(world, ball);

      const mouse = Mouse.create(render.canvas);
      const mouseConstraint = MouseConstraint.create(engine, {
        mouse,
        constraint: { stiffness: 0.2, render: { visible: false } }
      });
      World.add(world, mouseConstraint);
      render.mouse = mouse;

      const resetBtn = document.getElementById('reset');
      const gravitySlider = document.getElementById('gravity');

      gravitySlider.addEventListener('input', () => {
        engine.gravity.y = Number(gravitySlider.value);
      });
      engine.gravity.y = Number(gravitySlider.value);

      resetBtn.addEventListener('click', () => {
        World.remove(world, ball);
        const { width, height } = getSize();
        ball = Bodies.circle(width * 0.5, height * 0.2, Math.min(width, height) * 0.05, {
          restitution: 0.9,
          friction: 0.02,
          frictionAir: 0.002,
          render: { fillStyle: '#38bdf8', strokeStyle: '#e2e8f0', lineWidth: 2 }
        });
        World.add(world, ball);
      });

      function resize() {
        const { width, height } = getSize();
        render.options.width = width;
        render.options.height = height;
        render.canvas.width = width;
        render.canvas.height = height;

        Composite.remove(world, walls);
        walls = [
          Bodies.rectangle(width / 2, height + thickness / 2, width, thickness, { isStatic: true }),
          Bodies.rectangle(width / 2, -thickness / 2, width, thickness, { isStatic: true }),
          Bodies.rectangle(-thickness / 2, height / 2, thickness, height, { isStatic: true }),
          Bodies.rectangle(width + thickness / 2, height / 2, thickness, height, { isStatic: true })
        ];
        Composite.add(world, walls);
      }
      window.addEventListener('resize', resize);

      Events.on(engine, 'afterUpdate', () => {
        if (engine.timing.timestamp < 1000 && Math.abs(ball.velocity.x) < 0.01) {
          ball.force.x += 0.0005;
        }
      });
    </script>
  </body>
</html>
